# LRU Cache

## ๐ง ูุง ูู ุงูู LRU Cacheุ

> LRU ุชุนูู Least Recently Used โ ููู ุทุฑููุฉ ูุชุฎุฒูู ุนุฏุฏ ูุญุฏูุฏ ูู ุงูุจูุงูุงุช (cache) ุจุญูุซ ูุชู ุญุฐู ุฃูู ุนูุตุฑ ุชู ุงุณุชุฎุฏุงูู ูุคุฎุฑูุง ุนูุฏูุง ููุชูุฆ ุงูู cache.
> 

### โณ๏ธ ุงูุงุณุชุฎุฏุงู:

- ุดุงุฆุน ูู ุฅุฏุงุฑุฉ ุงูุฐุงูุฑุฉ ุงููุคูุชุฉ (ูุซู ุชุฎุฒูู ุตูุฑุ ูุชุงุฆุฌ ุนูููุงุชุ ุฅูุฎ).
- ุนูุฏ ุฅุฏุฎุงู ุนูุตุฑ ุฌุฏูุฏ ููุงู ุงูู cache ููุชูุฆูุงุ ูููู ุจุฅุฒุงูุฉ ุงูุนูุตุฑ **ุงูุฃูุฏู ุงุณุชุฎุฏุงููุง**.

---

## ๐ฏ ููุงุตูุงุช ุงูู LRU Cache:

- ูุญุชูู ุนูู ุญุฌู (capacity) ุซุงุจุช.
- ูููุฑ ุนูููุชูู ุฑุฆูุณูุชูู ุจููุงุกุฉ O(1):
    - `get(key)` โ ุฌูุจ ุงููููุฉ
    - `put(key, value)` โ ูุถุน ุฃู ุชุญุฏูุซ ุงููููุฉ
- ุนูุฏูุง ูุชู ุงููุตูู ุฅูู ุนูุตุฑ ุฃู ุฅุถุงูุชูุ ูุตุจุญ ูู "ุงูุฃุญุฏุซ ุงุณุชุฎุฏุงููุง".
- ุนูุฏ ุชุฌุงูุฒ ุงูุณุนุฉุ ูุชู ุฅุฒุงูุฉ "ุงูุฃูุฏู ุงุณุชุฎุฏุงููุง".

---

## ๐ช ุฎุทูุงุช ุจูุงุก ุงูู LRU Cache:

### โ ุงูุฎุทูุฉ 1: ูุญุชุงุฌ ุฅูู ุฎุฑูุทุฉ `Map` ูุชุฎุฒูู ุงูุนูุงุตุฑ ุจุณุฑุนุฉ.

### โ ุงูุฎุทูุฉ 2: ูุญุชุงุฌ ุฅูู `LinkedList` (ุฃู ูุงุฆูุฉ) ูุชุชุจุน ุชุฑุชูุจ ุงูุงุณุชุฎุฏุงู.

### โ ุงูุฎุทูุฉ 3: ุนูุฏ `get` ุฃู `put`:

- ูููู ุงูุนูุตุฑ ุฅูู ููุงูุฉ ุงููุงุฆูุฉ ูุฃูู "ุงูุฃุญุฏุซ ุงุณุชุฎุฏุงููุง".

### โ ุงูุฎุทูุฉ 4: ุฅุฐุง ุชุฌุงูุฒุช ุงูุณุนุฉุ ูุญุฐู ุฃูู ุนูุตุฑ (ุงูุฃูุฏู).

---

## ๐ฆ ุงูููุฏ ุงููุงูู ูุน ุงูุดุฑุญ:

```dart
dart
ูุณุฎุชุญุฑูุฑ
import 'dart:collection';

/// โ ุงูููุงุณ ุงูุฑุฆูุณู ุงูุฐู ููุซู ุงูู LRU Cache
class LRUCache<K, V> {
  // ๐ช ุงูุฎุทูุฉ 1: ุชุนุฑูู ุงูุณุนุฉ ุงููุตูู ููู Cache
  final int capacity;

  // ๐ช ุงูุฎุทูุฉ 2: ุงุณุชุฎุฏุงู LinkedHashMap ููุญูุงุธ ุนูู ุชุฑุชูุจ ุงูุฅุฏุฎุงู
  // ููู ูุญุงูุธ ุนูู ุงูุชุฑุชูุจ ุงูุฐู ูุญุชุงุฌู ุชููุงุฆููุง
  final _cache = LinkedHashMap<K, V>();

  // ๐ข ุงูุจุงูู ูุณุชูุจู ุงูุณุนุฉ
  LRUCache(this.capacity);

  /// โ ุงูุฏุงูุฉ ูุฌูุจ ุนูุตุฑ ุญุณุจ ุงูููุชุงุญ
  V? get(K key) {
    // ุฅุฐุง ูู ููู ุงูููุชุงุญ ููุฌูุฏูุงุ ูุฑุฌุน null
    if (!_cache.containsKey(key)) return null;

    // ๐ช ุงูุฎุทูุฉ 3: ุชุญุฏูุซ ุงูุชุฑุชูุจ โ ุฅุฒุงูุฉ ุงูุนูุตุฑ ุซู ุฅุนุงุฏุชู ูุฌุนูู ุงูุฃุญุฏุซ
    V value = _cache.remove(key)!;
    _cache[key] = value;

    return value;
  }

  /// โ ุงูุฏุงูุฉ ูุฅุถุงูุฉ ุฃู ุชุญุฏูุซ ุนูุตุฑ
  void put(K key, V value) {
    // ๐ช ุงูุฎุทูุฉ 4: ุฅุฐุง ูุงู ุงูููุชุงุญ ููุฌูุฏูุง ูุณุจููุงุ ูุญุฐูู ูุชุญุฏูุซ ุงูุชุฑุชูุจ
    if (_cache.containsKey(key)) {
      _cache.remove(key);
    }

    // ๐ช ุงูุฎุทูุฉ 5: ุฅุฐุง ูุตููุง ุงูุณุนุฉุ ูุญุฐู ุฃูุฏู ุนูุตุฑ (ุฃูู ููุชุงุญ)
    if (_cache.length >= capacity) {
      // ุงุณุชุฎุฏุงู iterator ูุฅุฒุงูุฉ ุงูุนูุตุฑ ุงูุฃูู
      _cache.remove(_cache.keys.first);
    }

    // ๐ช ุงูุฎุทูุฉ 6: ุฅุถุงูุฉ ุงูุนูุตุฑ ูุฃุญุฏุซ ุงุณุชุฎุฏุงููุง
    _cache[key] = value;
  }

  /// ๐ ุฏุงูุฉ ูููุณุงุนุฏุฉ ูู ุทุจุงุนุฉ ูุญุชููุงุช ุงููุงุด (ููุชุญูู)
  void printCache() {
    print('๐ ุงูุญุงูุฉ ุงูุญุงููุฉ ููู Cache:');
    _cache.forEach((key, value) {
      print('๐ธ $key: $value');
    });
    print('----------------------');
  }
}

```

---

## ๐งช ูุซุงู ุนููู ููุชูููุฐ:

```dart
dart
ูุณุฎุชุญุฑูุฑ
void main() {
  // ๐ข ุฅูุดุงุก Cache ุจุณุนุฉ 3 ุนูุงุตุฑ
  LRUCache<int, String> cache = LRUCache(3);

  cache.put(1, "A"); // ุฅุฏุฎุงู ุงูุนูุตุฑ 1:A
  cache.put(2, "B"); // ุฅุฏุฎุงู ุงูุนูุตุฑ 2:B
  cache.put(3, "C"); // ุฅุฏุฎุงู ุงูุนูุตุฑ 3:C
  cache.printCache();

  // ุงูุขู ุงููุงุด ููุชูุฆุ ุงูุชุงูู ุณูุญุฐู ุงูุฃูุฏู (1:A)
  cache.put(4, "D");
  cache.printCache(); // ูุฌุจ ุญุฐู 1:A

  // ุงุณุชุฎุฏุงู ุงูุนูุตุฑ 2 (ูุฌุนูู ุงูุฃุญุฏุซ)
  print("ุชู ุฌูุจ ุงูุนูุตุฑ 2: ${cache.get(2)}");
  cache.printCache();

  // ุฅุฏุฎุงู ุนูุตุฑ ุฌุฏูุฏุ ุณูุญุฐู ุงูุฃูุฏู ููู 3:C ุงูุขู
  cache.put(5, "E");
  cache.printCache();
}

```

---

## ๐งพ ุงููุฎุฑุฌุงุช ุงููุชููุนุฉ:

```
yaml
ูุณุฎุชุญุฑูุฑ
๐ ุงูุญุงูุฉ ุงูุญุงููุฉ ููู Cache:
๐ธ 1: A
๐ธ 2: B
๐ธ 3: C
----------------------
๐ ุงูุญุงูุฉ ุงูุญุงููุฉ ููู Cache:
๐ธ 2: B
๐ธ 3: C
๐ธ 4: D
----------------------
ุชู ุฌูุจ ุงูุนูุตุฑ 2: B
๐ ุงูุญุงูุฉ ุงูุญุงููุฉ ููู Cache:
๐ธ 3: C
๐ธ 4: D
๐ธ 2: B
----------------------
๐ ุงูุญุงูุฉ ุงูุญุงููุฉ ููู Cache:
๐ธ 4: D
๐ธ 2: B
๐ธ 5: E
----------------------

```

---

## โ ููุฎุต ุงููุฒุงูุง:

| ุงูููุฒุฉ | ุงูุชูุถูุญ |
| --- | --- |
| ุณุฑุนุฉ ุงููุตูู | `O(1)` ุจุงุณุชุฎุฏุงู LinkedHashMap |
| ุงูุญูุงุธ ุนูู ุงูุชุฑุชูุจ | ุชููุงุฆู ุจุฏูู ููุฏ ูุนูุฏ |
| ุงูููุฏ ูุธูู ูุณูู ุงูุชุนุฏูู | ูุงุจููุฉ ุงูุชูุณูุน ูุชุฎุฒูู ุฃู ููุน ุจูุงูุงุช |