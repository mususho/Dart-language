# Insertion Sort

## 🔵 ما هي خوارزمية Insertion Sort؟

خوارزمية **الترتيب بالإدراج (Insertion Sort)** تعمل بطريقة تشبه ترتيب أوراق اللعب في اليد:

- تبدأ بورقة واحدة (مُرتبة ضمنيًا).
- تأخذ الورقة التالية وتدرجها في المكان الصحيح ضمن الأوراق المرتبة.
- تكرر العملية حتى تنتهي من كل الأوراق (العناصر).

---

## ✅ خطوات تصميم الخوارزمية:

| رقم | الخطوة |
| --- | --- |
| 1 | تعريف دالة باسم `insertionSort`. |
| 2 | تمرير القائمة كوسيط للدالة. |
| 3 | نبدأ من العنصر الثاني (index = 1) ونتعامل مع العناصر السابقة كمجموعة مرتبة. |
| 4 | نحفظ العنصر الحالي (الذي نريد إدراجه) في متغير `key`. |
| 5 | نقارن `key` بالعناصر السابقة، وإذا كانت أكبر منه، نحركها للأمام. |
| 6 | عندما نجد المكان الصحيح لـ `key`، ندرجه فيه. |
| 7 | نكرر العملية لكل عنصر حتى النهاية. |

---

## 💻 الكود الكامل مع الشرح داخل التعليقات:

```dart

// الخطوة 1: تعريف دالة الترتيب بالإدراج
void insertionSort(List<int> list) {
  int n = list.length;

  // الخطوة 3: نبدأ من العنصر الثاني (index = 1) لأن العنصر الأول نعتبره مرتّبًا
  for (int i = 1; i < n; i++) {
    // الخطوة 4: نحفظ العنصر الحالي في متغير مؤقت يسمى key
    int key = list[i];
    int j = i - 1;

    print("🔍 الجولة ${i}: نحاول إدراج العنصر $key في الموضع الصحيح");

    // الخطوة 5: نحرك العناصر الأكبر من key إلى الأمام
    while (j >= 0 && list[j] > key) {
      print("← ${list[j]} > $key → نحرك ${list[j]} إلى الموضع ${j + 1}");
      list[j + 1] = list[j]; // نحرك العنصر للأمام
      j--; // نتحرك للخلف في القائمة
    }

    // الخطوة 6: ندرج العنصر key في مكانه الصحيح
    list[j + 1] = key;

    print("✅ تم إدراج العنصر $key في الموضع ${j + 1}");
    print("📦 الحالة بعد الجولة ${i}: $list\n");
  }
}

// دالة main لتجربة الخوارزمية
void main() {
  // قائمة غير مرتبة
  List<int> numbers = [9, 5, 1, 4, 3];

  print("🔢 القائمة قبل الترتيب:");
  print(numbers);

  // استدعاء دالة الترتيب
  insertionSort(numbers);

  print("✅ القائمة بعد الترتيب:");
  print(numbers);
}

```

---

## 🧪 مثال عملي (خطوة بخطوة):

لنفترض القائمة: `[9, 5, 1, 4, 3]`

- الجولة 1:
    - key = 5 ← 9 > 5 → نحرك 9 ← إدراج 5 في البداية
    - النتيجة: `[5, 9, 1, 4, 3]`
- الجولة 2:
    - key = 1 ← 9 > 1 و 5 > 1 → نحركهما ← إدراج 1 في الموضع 0
    - النتيجة: `[1, 5, 9, 4, 3]`
- الجولة 3:
    - key = 4 ← 9 > 4 و 5 > 4 ← إدراج 4 في الموضع 1
    - النتيجة: `[1, 4, 5, 9, 3]`
- الجولة 4:
    - key = 3 ← 9 > 3 و 5 > 3 و 4 > 3 ← إدراج 3 في الموضع 1
    - النتيجة: `[1, 3, 4, 5, 9]`

---

## ⏱️ تحليل الأداء:

| الحالة | الزمن المستغرق (Time Complexity) |
| --- | --- |
| أفضل حالة | O(n) ← عندما تكون القائمة مرتبة |
| أسوأ حالة | O(n²) ← عندما تكون مرتبة عكسيًا |
| متوسط الحالة | O(n²) |
| خاصية مهمة | الخوارزمية مستقرة (لا تغيّر ترتيب العناصر المتساوية) ✅ |

---

## 🧠 متى أستخدم Insertion Sort؟

- عند التعامل مع عدد صغير من العناصر.
- عندما تكون القائمة **شبه مرتبة**.
- في التعليم والتدريب لأنه سهل الفهم.