# Counting Sort

## 🔵 ما هي خوارزمية Counting Sort؟

**Counting Sort** هي خوارزمية غير مقارنة (Non-Comparative) تُستخدم لفرز قائمة من الأعداد الصحيحة ضمن **نطاق معروف وصغير**.

بدلاً من مقارنة العناصر، تستخدم عدادًا لكل قيمة ممكنة.

---

## 📌 متى أستخدم Counting Sort؟

- عندما تكون القيم كلها **أعداد صحيحة موجبة أو صفر**.
- عندما يكون **أكبر رقم في القائمة ليس كبيرًا جدًا**.

---

## ✅ خطوات تصميم الخوارزمية:

| رقم | الخطوة |
| --- | --- |
| 1 | إيجاد أكبر قيمة في القائمة لتحديد حجم مصفوفة العدّ. |
| 2 | إنشاء مصفوفة عدّ (count array) لتخزين عدد مرات تكرار كل عنصر. |
| 3 | ملء مصفوفة العد بعدد مرات تكرار كل عنصر. |
| 4 | استخدام مصفوفة العد لبناء القائمة المرتبة. |

---

## ⚙️ الكود الكامل بلغة Dart مع التعليق المفصل:

```dart
dart
CopyEdit
// الخطوة 1: تعريف دالة الترتيب بالعدّ
List<int> countingSort(List<int> list) {
  if (list.isEmpty) return [];

  // الخطوة 1: إيجاد أكبر قيمة في القائمة لتحديد حجم مصفوفة العدّ
  int max = list.reduce((a, b) => a > b ? a : b);
  print("📏 أكبر قيمة في القائمة: $max");

  // الخطوة 2: إنشاء مصفوفة العدّ بحجم (max + 1)
  List<int> count = List.filled(max + 1, 0);

  // الخطوة 3: عدّ تكرار كل عنصر في القائمة
  for (int num in list) {
    count[num]++;
  }

  print("📊 مصفوفة العدّ بعد العد: $count");

  // الخطوة 4: بناء القائمة المرتبة باستخدام مصفوفة العدّ
  List<int> sortedList = [];

  // نكرر على كل قيمة محتملة (من 0 إلى max)
  for (int i = 0; i < count.length; i++) {
    // نضيف القيمة (i) بعدد مرات ظهورها
    for (int j = 0; j < count[i]; j++) {
      sortedList.add(i);
    }
  }

  print("✅ القائمة المرتبة: $sortedList");

  return sortedList;
}

// دالة main لتجربة Counting Sort
void main() {
  // قائمة أعداد صحيحة غير مرتبة
  List<int> numbers = [4, 2, 2, 8, 3, 3, 1];

  print("🔢 القائمة قبل الترتيب:");
  print(numbers);

  // استدعاء دالة الترتيب
  List<int> sorted = countingSort(numbers);

  print("📦 القائمة بعد الترتيب:");
  print(sorted);
}

```

---

## 🧪 مثال عملي:

لنفترض القائمة: `[4, 2, 2, 8, 3, 3, 1]`

1. **أكبر قيمة**: `8`
2. **مصفوفة العد** تصبح:

```
makefile
CopyEdit
count = [0, 1, 2, 2, 1, 0, 0, 0, 1]
         ↑  ↑  ↑  ↑  ↑  ↑  ↑  ↑  ↑
         0  1  2  3  4  5  6  7  8

```

1. **نقوم ببناء القائمة المرتبة** عبر تكرار كل قيمة بعدد مرات ظهورها:

```
csharp
CopyEdit
[1, 2, 2, 3, 3, 4, 8]

```

---

## ⏱️ تحليل الأداء:

| الحالة | الزمن المستغرق (Time Complexity) |
| --- | --- |
| جميع الحالات | O(n + k) ← حيث `n` عدد العناصر و `k` هو أكبر عنصر |
| استخدام الذاكرة | O(k) |

---

## ⚠️ ملاحظات مهمة:

- **Counting Sort لا يستخدم المقارنات**، لذا لا يصلح للقيم التي لا يمكن تمثيلها كأعداد صحيحة.
- لا يدعم القيم **السالبة** بدون تعديل إضافي (يمكن تعديله لذلك لو أردت).
- الخوارزمية **سريعة جدًا عند نطاق محدود من القيم**.