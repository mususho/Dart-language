# Interfaces & Mixins

### **الواجهات والمزج (Interfaces & Mixins)**

في البرمجة الكائنية التوجه (OOP)، تُعتبر **الواجهات** و **المزج** من الأدوات المهمة لتوسيع أو تعديل سلوك الكائنات بطريقة مرنة. كلا المفهومين يساعدان على تعزيز **إعادة الاستخدام** و **المرونة** في الكود. دعونا نوضح كلًا منهما بشكل مفصل:

---

### **1. الواجهات (Interfaces)**

الواجهة (Interface) هي نوع خاص من الفئات في البرمجة الكائنية التوجه. تمثل **مجموعة من القواعد** التي **يجب على الفئات** تنفيذها. تحتوي الواجهة فقط على **التعريفات** (أي التوقيع) للطرق، ولكن لا تحتوي على أي تنفيذ فعلي لهذه الطرق.

الهدف من الواجهات هو فرض سلوكيات معينة على الفئات التي **تطبق** هذه الواجهة، مما يضمن أن هذه الفئات تحتوي على **دوال معينة** يمكن التعامل معها بطريقة موحدة.

### **بناء الجملة للواجهة:**

```dart
dart
نسختحرير
// تعريف الواجهة
abstract class InterfaceName {
  // دالة مجردة
  void method1();
  void method2();
}

// الفئة التي تقوم بتطبيق الواجهة
class ClassName implements InterfaceName {
  @override
  void method1() {
    // تنفيذ method1
    print("method1 implemented");
  }

  @override
  void method2() {
    // تنفيذ method2
    print("method2 implemented");
  }
}

```

### **مثال على الواجهة**:

```dart
dart
نسختحرير
// تعريف الواجهة
abstract class Animal {
  void sound();
}

// تطبيق الواجهة في الفئات
class Dog implements Animal {
  @override
  void sound() {
    print("The dog barks");
  }
}

class Cat implements Animal {
  @override
  void sound() {
    print("The cat meows");
  }
}

void main() {
  Animal dog = Dog();
  dog.sound();  // The dog barks

  Animal cat = Cat();
  cat.sound();  // The cat meows
}

```

**الإخراج:**

```
bash
نسختحرير
The dog barks
The cat meows

```

- **الواجهة `Animal`** تحتوي على دالة **`sound()`** التي يجب تنفيذها في الفئات التي **تطبق** هذه الواجهة.
- **الفئات `Dog` و `Cat`** تطبق الواجهة وتنفذ دالة **`sound()`**.
- يمكن استخدام الواجهة لفرض **سلوك موحد** على جميع الكائنات التي **تطبق** هذه الواجهة.

---

### **2. المزج (Mixins)**

المزج (Mixins) هو مفهوم يُتيح لك **مشاركة السلوكيات بين الفئات**، بحيث يمكنك **دمج** وظائف من عدة فئات دون أن تكون هناك علاقة وراثية مباشرة بينها. **المزج** يتيح لك إضافة وظائف لفئة معينة بطريقة مرنة، ويمكن أن يكون أكثر **قوة** من الوراثة التقليدية في بعض الحالات.

### **كيف يعمل المزج؟**

- يمكن **استخدام المزج** من خلال **الاستفادة من فئات تحتوي على سلوكيات مخصصة**، ثم **دمج هذه السلوكيات** في الفئات الأخرى.
- **المزج لا ينشئ علاقة وراثية** بين الفئات، وإنما يتيح للفئة الاستفادة من وظائف موجودة في فئات أخرى.

### **بناء الجملة للمزج:**

```dart
dart
نسختحرير
// تعريف الفئة التي تحتوي على السلوكيات المشتركة
mixin MixinName {
  void sharedMethod() {
    print("This is a shared method");
  }
}

// الفئة التي تستخدم المزج
class ClassName with MixinName {
  // الفئة تقوم باستخدام سلوكيات المزج
}

```

### **مثال على المزج:**

```dart
dart
نسختحرير
// تعريف المزج
mixin Walkable {
  void walk() {
    print("Walking...");
  }
}

// فئة Animal
class Animal {
  void breathe() {
    print("Breathing...");
  }
}

// فئة Dog تستخدم المزج
class Dog extends Animal with Walkable {
  void bark() {
    print("Barking...");
  }
}

void main() {
  Dog dog = Dog();
  dog.walk();   // Walking...
  dog.breathe(); // Breathing...
  dog.bark();    // Barking...
}

```

**الإخراج:**

```
نسختحرير
Walking...
Breathing...
Barking...

```

- **المزج `Walkable`** يحتوي على سلوك **`walk()`**.
- **الفئة `Dog`** تستخدم **المزج `Walkable`** لتستفيد من دالة **`walk()`**، بينما يمكن أن تظل وراثة الفئة `Dog` من فئة **`Animal`**.
- **المزج لا ينشئ علاقة وراثية** بين الفئات، ولكنه يتيح **دمج السلوكيات** من فئات متعددة.

---

### **الاختلافات بين الواجهات والمزج**

| **الميزة** | **الواجهات (Interfaces)** | **المزج (Mixins)** |
| --- | --- | --- |
| **التعريف** | هي مجموعة من **التوقيعات** لدوال بدون تنفيذ. | هي **سلوكيات** قابلة للمشاركة بين الفئات. |
| **الوظيفة** | فرض **سلوكيات** معينة على الفئات التي **تطبقها**. | **دمج السلوكيات** من فئات مختلفة دون علاقة وراثية. |
| **وراثة الفئات** | يجب على الفئات **تطبيق** جميع الدوال المعرفة. | يمكن **دمج** سلوكيات عدة فئات باستخدام **`with`**. |
| **الدوال المجردة** | تحتوي على دوال مجرده يجب أن تنفذ في الفئات. | لا تحتوي على دوال مجردة؛ تستخدم فقط **الدوال العادية**. |
| **العدد** | يمكن **تطبيق** واجهة واحدة أو أكثر. | يمكن **دمج** العديد من المزج في نفس الفئة. |

---

### **متى تستخدم الواجهات؟**

- **فرض التعاقد**: عندما تريد التأكد من أن الفئات التي تطبق الواجهة تقوم بتنفيذ دوال معينة. هذه الواجهات يمكن أن تكون مثالية لـ **التعاقدات** (contracts).
- **توحيد السلوك**: عندما تحتاج إلى فرض سلوك موحد بين فئات متعددة ولكن لا تشترط أن تكون هناك علاقة وراثية بين الفئات.

### **متى تستخدم المزج؟**

- **إعادة استخدام السلوكيات**: عندما تحتاج إلى **إعادة استخدام** نفس السلوكيات بين عدة فئات دون ربطها ببعض وراثيًّا.
- **إضافة وظائف متعددة**: عندما تريد إضافة وظائف متعددة للفئات المختلفة دون الحاجة إلى **وراثة متعددة**.

---

### **الخلاصة**

- **الواجهات** في دارت تُستخدم لتعريف **التوقيعات** للدوال التي يجب على الفئات تطبيقها، وتُعتبر وسيلة لفرض **سلوك موحد** عبر فئات متعددة.
- **المزج** يسمح لك بإضافة **سلوكيات** من فئات أخرى إلى فئتك دون استخدام الوراثة المباشرة، مما يعزز **المرونة** ويقلل من تعقيد الكود.
- **الواجهات** تكون مثالية عندما ترغب في **فرض تعاقدات** أو **سلوكيات** معينة، بينما **المزج** يُستخدم لدمج **وظائف إضافية** دون فرض علاقة وراثية.