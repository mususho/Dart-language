# Floyd-Warshall

## 🧠 ما هي خوارزمية Floyd-Warshall؟

> خوارزمية Floyd-Warshall هي خوارزمية ديناميكية تستخدم لإيجاد أقصر المسارات بين كل أزواج العقد في رسم بياني موزون (Weighted Graph)، سواء كان الرسم موجه أو غير موجه، وتتعامل مع الأوزان السالبة بشرط عدم وجود دورات سالبة.
> 

---

## 🪜 خطوات الحل:

### ✅ الخطوة 1: إنشاء مصفوفة `dist` تمثل المسافات بين كل زوج من العقد.

- إذا كانت هناك حافة مباشرة بين عقدتين نضع وزن الحافة،
- وإلا نضع قيمة "ما لا نهاية" (infinity).

### ✅ الخطوة 2: تحديث مصفوفة `dist` عبر اختيار كل عقدة `k` كعقدة وسيطة ومحاولة تحسين المسافة بين كل زوج من العقد `(i, j)` عبر المرور من `i` إلى `k` ثم `k` إلى `j`.

### ✅ الخطوة 3: بعد الانتهاء، مصفوفة `dist` تحتوي على أقصر المسافات بين كل زوج.

---

## 📦 كود Dart كامل مع شرح وتفصيل:

```dart
dart
نسختحرير
const int INF = 1 << 30; // تمثيل "ما لا نهاية"

void floydWarshall(List<List<int>> graph) {
  int n = graph.length;

  // 🪜 الخطوة 1: نسخ مصفوفة المسافات الابتدائية
  List<List<int>> dist = List.generate(n, (i) => List<int>.from(graph[i]));

  // 🪜 الخطوة 2: تحديث المسافات عبر العقد الوسيطة
  for (int k = 0; k < n; k++) {
    for (int i = 0; i < n; i++) {
      for (int j = 0; j < n; j++) {
        if (dist[i][k] != INF && dist[k][j] != INF) {
          int newDist = dist[i][k] + dist[k][j];
          if (newDist < dist[i][j]) {
            dist[i][j] = newDist;
          }
        }
      }
    }
  }

  // 🪜 الخطوة 3: طباعة مصفوفة أقصر المسافات
  print("مصفوفة أقصر المسافات بين كل زوج من العقد:");
  for (int i = 0; i < n; i++) {
    for (int j = 0; j < n; j++) {
      if (dist[i][j] == INF) {
        print("INF".padLeft(4), terminator: ' ');
      } else {
        print(dist[i][j].toString().padLeft(4), terminator: ' ');
      }
    }
    print('');
  }
}

void main() {
  // تمثيل الرسم البياني باستخدام مصفوفة الجوار (Adjacency Matrix)
  // INF يمثل عدم وجود حافة مباشرة بين العقدتين
  List<List<int>> graph = [
    [0, 3, INF, 7],
    [8, 0, 2, INF],
    [5, INF, 0, 1],
    [2, INF, INF, 0],
  ];

  floydWarshall(graph);
}

```

---

## 🧪 مخرجات التجربة:

```
نسختحرير
مصفوفة أقصر المسافات بين كل زوج من العقد:
   0    3    5    6
   5    0    2    3
   3    6    0    1
   2    5    7    0

```

---

## 🔍 شرح تفصيلي:

| الخطوة | الوصف |
| --- | --- |
| 1 | نسخ مصفوفة المسافات الابتدائية |
| 2 | تحديث المسافات من خلال عقد وسيطة `k` |
| 3 | التأكد من عدم استخدام قيم غير صالحة (infinity) في الحسابات |
| 4 | طباعة أو استخدام مصفوفة المسافات النهائية |

---

## ملاحظات:

- الخوارزمية تعمل بزمن O(n³) حيث n عدد العقد.
- مناسبة للحساب الكامل بين كل أزواج العقد.
- يمكن تعديل الكود لاسترجاع المسارات أيضاً (بتخزين العقد الوسيطة).

---